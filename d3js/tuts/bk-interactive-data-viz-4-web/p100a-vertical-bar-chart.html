<!DOCTYPE html>
<html class="no-js">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>d3 bar chart</title>
<script src="http://localhost:8001/js/lib/d3-3.4.13.js"></script>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://localhost:8001/css/lib/normalize-2.1.2.css">
<style media="screen" type="text/css">
    div.bar {
        display: inline-block;
        width: 20px;
        height: 75px; /* We'll override height later */
        background-color: teal;
        margin-right: 2px;
    }
</style>
</head>
<body>
<script src="http://localhost:8001/js/lib/jquery-1.11.0.js"></script>
<script>

var dataset = [    5, 10, 13, 19, 21
                , 25, 22, 18, 15, 13
                , 11, 12, 15, 20, 18
                , 11, 12, 15, 20, 18
                , 11, 12, 15, 20, 18
                , 17, 16, 18, 23, 25
                , 20, 21, 12, 23, 24 ];

var w = 500;
var h = 100;
var barPadding = 1;
var columnWidth = w/dataset.length
var barWidth = columnWidth - barPadding;
var svg = d3.select("body").append("svg").attr("width", w).attr("height", h).attr("style", "background-color:#4ee");

svg.selectAll("rect")
.data(dataset)
.enter()
.append("rect")
.attr({
      "x"     : function(d,i){ return i * columnWidth; }
    , "y"     : function(d,i){ return h - d*3 }
    , "width" : barWidth
    , "height": function(d,i){ return d*3 }
    , "fill"  : function(d,i){return "rgb(100,0,"+ (d*10)+")"}
});

svg.selectAll("text")
.data(dataset)
.enter()
.append("text")
.text(function(d,i){return d})
.attr({
      "x" : function(d, i){return i*columnWidth + barWidth/2;}
    , "y" : function(d, i) {return h - d*3 + 7}
    , "font-size": "7px"
    , "font-familly": "sans-serif"
    , "fill" : "#fff"
    , "text-anchor" : "middle"
})

</script>
</body>
</html>
